/*
formBuilder - git@github.com:kevinchappell/formBuilder.git
Version: 1.4.0
Author: Kevin Chappell <kevin.b.chappell@gmail.com>
*/
"use strict";!function(e){e.fn.formRender=function(t){var r=e(this),a={destroyTemplate:!0,container:!1},n={},i=e.extend(a,t);n.markup=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=arguments.length<=2||void 0===arguments[2]?"":arguments[2];t=n.attrString(t),r=Array.isArray(r)?r.join(""):r;var a=["input"],i=-1===a.indexOf(e)?"<"+e+" "+t+">"+r+"</"+e+">":"<"+e+" "+t+"/>";return i},n.fieldRender=function(t){var r="",a="",i=n.parseAttrs(t.attributes),s=(i.description,e("option",t));i.id=i.name,"checkbox"!==i.type&&(i["class"]="form-control");var o='<label for="'+i.id+'">'+i.label+"</label>";delete i.label,delete i.description;var c=n.attrString(i);switch(i.type){case"textarea":case"rich-text":delete i.type,delete i.value,r=o+"<textarea "+c+"></textarea>";break;case"select":i.type=i.type.replace("-group",""),s.length&&s.each(function(e,t){var r=n.parseAttrs(t.attributes),i=n.attrString(r);a+="<option "+i+">"+t.innerHTML+"</option>"}),r=o+"<select "+c+">"+a+"</select>";break;case"checkbox-group":case"radio-group":i.type=i.type.replace("-group",""),delete i["class"],s.length&&s.each(function(t,r){var s=e.extend(i,n.parseAttrs(r.attributes));s.name=i.name+"[]",s.id=i.id+"-"+t;var o=n.attrString(s);a+="<input "+o+' /> <label for="'+s.id+'">'+r.innerHTML+"</label><br>"}),r=o+'<div class="'+i.type+'-group">'+a+"</div>";break;case"text":case"password":case"email":case"date":case"autocomplete":r=o+" <input "+c+">";break;case"checkbox":r="<input "+c+"> "+o;break;default:r="<"+i.type+"></"+i.type+">"}return'<div class="form-group">'+r+"</div>"},n.attrString=function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r+'="'+e[r]+'"');return t.join(" ")},n.parseAttrs=function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r].nodeName]=e[r].nodeValue);return t},this.each(function(){var t=[],a=e.parseXML(r.val()),s=e("field",a);e("settings",a);if(!a)return alert("No formData. Add some fields and try again"),!1;s.length&&s.each(function(e,r){e=e,t.push(n.fieldRender(r))});var o=t.join("");i.container&&i.container.length?i.container.html(o):r.replaceWith(o)})}}(jQuery);